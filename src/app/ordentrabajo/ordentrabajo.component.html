<div class="container-fluid">
  <div class="row g-1 mt-2 justify-content-md-center mb-4">
    <div class="col-12">
      <h3>Orden de Trabajo - Mantenimiento Externo</h3>
      <div id="data-grid">
        <dx-data-grid
          id="gridContainer"
          [dataSource]="ordenesTrabajo"
          keyExpr="id"
          [showBorders]="true"
          (onRowUpdating)="actualizarOrdenTrabajo($event)"
          (onRowInserting)="insertarOrdenTrabajo($event)"
          (onRowRemoving)="eliminarOrdenTrabajo($event)"
          [columnHidingEnabled]="true"
          [rowAlternationEnabled]="true"
          [showColumnLines]="true"
          [showRowLines]="true"
          [allowColumnResizing]="true"
        >
          <dxo-paging [pageSize]="15"></dxo-paging>
          <dxo-pager
            [visible]="true"
            [showPageSizeSelector]="true"
            [allowedPageSizes]="[15, 25, 50, 100]"
          ></dxo-pager>
          
          <dxo-editing
            mode="row"
            [allowUpdating]="true"
            [allowAdding]="true"
            [allowDeleting]="true"
            [selectTextOnEditStart]="true"
            [useIcons]="true"
          >
          </dxo-editing>
      
          <dxi-column 
            dataField="id" 
            caption="ID" 
            [width]="70" 
            [allowEditing]="false" 
            alignment="center"
          ></dxi-column>
          
          <dxi-column 
            dataField="ordenServicioCabeceraId" 
            caption="Orden Servicio"
            [width]="180"
          >
            <dxo-lookup
              [dataSource]="ordenesServicio"
              valueExpr="id"
              displayExpr="codigoOrdenInterna"
            ></dxo-lookup>
            <dxi-validation-rule 
              type="required" 
              message="La orden de servicio es requerida"
            ></dxi-validation-rule>
          </dxi-column>
          
          <dxi-column 
            dataField="nombre" 
            caption="Nombre"
            [width]="200"
          >
            <dxi-validation-rule 
              type="required" 
              message="El nombre es requerido"
            ></dxi-validation-rule>
          </dxi-column>
          
          <dxi-column 
            dataField="descripcion" 
            caption="DescripciÃ³n"
            [width]="250"
          ></dxi-column>
          
          <dxi-column 
            dataField="fechaInicio" 
            caption="Fecha Inicio"
            dataType="datetime"
            [width]="150"
          >
            <dxi-validation-rule 
              type="required" 
              message="La fecha de inicio es requerida"
            ></dxi-validation-rule>
          </dxi-column>
          
          <dxi-column 
            dataField="fechaCompromiso" 
            caption="Fecha Compromiso"
            dataType="datetime"
            [width]="150"
          >
            <dxi-validation-rule 
              type="required" 
              message="La fecha de compromiso es requerida"
            ></dxi-validation-rule>
          </dxi-column>

          <dxi-column 
            dataField="fechaFin" 
            caption="Fecha Fin"
            dataType="datetime"
            [width]="150"
          ></dxi-column>

          <dxi-column 
            dataField="grupoTrabajoId" 
            caption="Grupo Trabajo"
            [width]="150"
          >
            <dxo-lookup
              [dataSource]="gruposTrabajo"
              valueExpr="id"
              displayExpr="nombre"
            ></dxo-lookup>
            <dxi-validation-rule 
              type="required" 
              message="El grupo de trabajo es requerido"
            ></dxi-validation-rule>
          </dxi-column>

          <dxi-column 
            dataField="estado" 
            caption="Estado"
            dataType="number"
            [width]="90"
            alignment="center"
          ></dxi-column>

          <dxi-column type="buttons" [width]="110" [fixed]="true" fixedPosition="right">
            <dxi-button name="edit" icon="edit" hint="Editar"></dxi-button>
            <dxi-button name="delete" icon="trash" hint="Eliminar"></dxi-button>
            <dxi-button name="save" icon="save" hint="Guardar"></dxi-button>
            <dxi-button name="cancel" icon="revert" hint="Cancelar"></dxi-button>
          </dxi-column>
        </dx-data-grid>

        <div 
          id="messageBox" 
          style="display: none; padding: 10px; border-radius: 5px; margin-top: 10px; font-weight: bold;"
        ></div>
        
        <block-ui></block-ui>
      </div>
    </div>
  </div>
</div>